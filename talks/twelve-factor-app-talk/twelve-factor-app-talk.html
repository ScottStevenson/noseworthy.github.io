<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>The Twelve-Factor App</title>
        <meta name="description" content="The Twelve-Factor App Talk">
        <meta name="author" content="Michael Noseworthy">

        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

        <link rel="stylesheet" href="../../css/reveal.css">
        <link rel="stylesheet" href="../../css/theme/blood.css" id="theme">

        <script src="../../js/reveal.js"></script>
        <script src="../../lib/js/head.min.js"></script>

        <!-- Code syntax highlighting -->
        <link rel="stylesheet" href="../../lib/css/zenburn.css">

        <!-- Font-Awesome! -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">

        <!-- Printing and PDF exports -->
        <script>
            var link = document.createElement( 'link' );
            link.rel = 'stylesheet';
            link.type = 'text/css';
            link.href = window.location.search.match( /print-pdf/gi ) ? '../../css/print/pdf.css' : '../../css/print/paper.css';
            document.getElementsByTagName( 'head' )[0].appendChild( link );
        </script>

        <!--[if lt IE 9]>
        <script src="../../lib/js/html5shiv.js"></script>
        <![endif]-->
    </head>

    <body>

        <div class="reveal">
            <!-- Any section element inside of this container is displayed as a slide -->
            <div class="slides">
                <section>
                    <h1>The Twelve-Factor App</h1>
                    <h3>Build Modern, Saclable Web Apps</h3>
                </section>
                <section>
                    <h2>Agenda</h2>
                    <ul>
                        <li>
                            Background
                        </li>
                        <li>
                            The 12 Factors
                        </li>
                        <li>
                            Question Time!
                        </li>
                    </ul>
                </section>
                <section>
                    <section>
                        <h2>Background</h2>
                    </section>
                    <section>
                        <h3>Origin</h3>
                        <p>
                            Written in November, 2011 by Adam Wiggins, co-founder
                            of Heroku
                        </p>
                        <p>
                            Written as a methodology to:
                            <ul>
                                <li>Avoid common pitfalls when building cloud based SaaS apps</li>
                                <li>Help people build apps that will work optimally on Heroku and other PaaS offerings</li>
                            </ul>
                        </p>
                    </section>
                    <section>
                        <h3>What <em>kind</em> of app does it encourage</h3>
                        <p>Apps that:</p>
                        <ul>
                            <li>Use <strong>declarative formats</strong> for setup automation, to minimize time and cost for new developers joining the project</li>
                            <li>Have a <strong>clean contract</strong> with the underlying operating system, offering <strong>maximum portability</strong> between execution environments</li>
                        </ul>
                    </section>
                    <section>
                        <h3>What <em>kind</em> of app does it encourage</h3>
                        <ul>
                            <li>Are suitable for <strong>deployment</strong> on modern cloud platforms, obviating the need for servers and systems administration</li>
                            <li><strong>Minimize divergence</strong> between development and production, enabling <strong>continuous deployment</strong> for maximum agility</li>
                            <li>And can <strong>scale up</strong> without significant changes to tooling, architecture, or development practices</li>
                        </ul>
                    </section>
                    <section>
                        <h3>Programming Language?</h3>
                        <p>Nope.</p>
                        <p class="fragment">The Twelve-Factor App is language, platform, and toolset agnostic!</p>
                    </section>
                </section>
                <section>
                    <h2>The Twelve Factors</h2>
                    <p>Finally! Why we're all here!</p>
                </section>
                <section>
                    <section>
                        <h2>I. Codebase</h2>
                        <blockquote>
                            One codebase tracked in revision control, many deploys
                        </blockquote>
                    </section>
                    <section>
                        <h3>One Codebase</h3>
                        <p>A twelve-factor app relates one-to-one with a single code base</p>
                        <p class="fragment">Multiple code bases == Distributed System</p>
                        <p class="fragment">Each app in a distributed system is a <em>tewlve-factor</em> app</p>
                        <p class="fragment">... with it's own codebase</p>
                    </section>
                    <section>
                        <h3>Tracked In Revision Control</h3>
                        <p>Code base <em>MUST</em> be tracked in reversion control</p>
                        <p class="fragment">Allows for collaborative development</p>
                        <p class="fragment">Recommend <strong>git</strong> but any revision control will do</p>
                    </section>
                    <section>
                        <h3>Many Deploys</h3>
                        <p>Each running instance is a <strong>deploy</strong></p>
                        <p class="fragment">Might have dev, test, and production deploys</p>
                        <p class="fragment">Each running instance on a developer's machine is a deploy</p>
                        <p class="fragment">Code base for each deploy is the same, but probably different versions and configuration</p>
                    </section>
                    <section>
                        <h3>Many Deploys</h3>
                        <img alt="Many Deploy Diagram" style="border: none; box-shadow: none;" src="./content/codebase-deploys.svg">
                    </section>
                    <section>
                        <h3>Why?</h3>
                        <p>Helps new developers become familiar by having single source</p>
                        <p class="fragment">Eliminates compliations with dependencies on other source code</p>
                        <p class="fragment">Deploys are easy because you just need one source repo</p>
                        <p class="fragment">All the benefits of a revision control system</p>
                    </section>
                </section>
                <section>
                    <section>
                        <h2>II. Dependencies</h2>
                        <blockquote>Explicitly declare and isolate dependencies</blockquote>
                    </section>
                    <section>
                        <h3>Explicitly Declare Dependencies</h3>
                        <p>Most programming languages have some sort of package manager</p>
                        <p class="fragment">CPAN for perl, PyPI for python, npm for node.js, etc.</p>
                        <p class="fragment">A twelve-factor app has dependencies (including version) declared in a <em>dependency manifest</em></p>
                    </section>
                    <section>
                        <h3>Isolate Dependencies</h3>
                        <blockquote>A twelve-factor app never relies on implicit existence of system-wide packages</blockquote>
                        <p class="fragment">Use a dependency isolation tool to ensure no leak</p>
                        <p class="fragment"><em>Vendor</em> or <em>bundle</em> dependencies locally <em>with</em> the app</p>
                        <p class="fragment">This includes "system" tools, don't expect <code>curl</code> to be installed everywhere!</p>
                    </section>
                    <section>
                        <h3>Why?</h3>
                        <p>
                            Helps new developers because all they need is:
                            <ol>
                                <li>Language runtime</li>
                                <li>Dependency manager</li>
                            </ol>
                        </p>
                        <p class="fragment">Everything is set up with a declarative <code>build</code> command</p>
                    </section>
                </section>
                <section>
                    <section>
                        <h2>III. Config</h2>
                        <blockquote>Store Config In The Environment</blockquote>
                    </section>
                    <section>
                        <h3>What Is Config?</h3>
                        <blockquote>An appâ€™s <em>config</em> is everything that is likely to vary between deploys</blockquote>
                        <p class="fragment">
                            For example:
                            <ul>
                                <li class="fragment">Resource handles to backing services</li>
                                <li class="fragment">Credentials and <em>secrets</em> to external services</li>
                                <li class="fragment">Per-deploy values such as canonical hostname</li>
                            </ul>
                        </p>
                    </section>
                    <section>
                        <h3>Where Not To Store Config</h3>
                        <p>A Twelve-Factor App <strong>never</strong> stores any config in the code base</p>
                        <p class="fragment"><strong>Protip:</strong> If you can open source the codebase at any time and not comprimise yourself, you're probably good!</p>
                    </section>
                    <section>
                        <h3>A (Slightly) Better Solution</h3>
                        <p><em>Unversioned</em> config file</p>
                        <ul>
                            <li style="list-style: none;"><strong>+</strong> Outside of reversion control</li>
                            <li style="list-style: none;"><strong>-</strong> Difficult to manage multiple deploy targets</li>
                            <li style="list-style: none;"><strong>-</strong> Easy to accidentally commit to revision control</li>
                        </ul>
                    </section>
                    <section>
                        <h3>Best Solution</h3>
                        <p>Store config in environment variables</p>
                        <ul>
                            <li style="list-style: none;"><strong>+</strong> Outside of reversion control</li>
                            <li style="list-style: none;"><strong>+</strong> Set at deploy time based on deploy target</li>
                            <li style="list-style: none;"><strong>+</strong> Secure to the user of the running process</li>
                            <li style="list-style: none;"><strong>+</strong> Language and OS agnostic</li>
                        </ul>
                        <p class="fragment">But how do you manage the config?</p>
                    </section>
                    <section>
                        <h3>Addendum</h3>
                        <p>The Twelve-Factor App doesn't talk much about this point</p>
                        <p class="fragment">If you can't store secrets in version control, where do you store them?</p>
                        <p class="fragment">Seperate secure/encrypted "vault" like 1password or truecrypt?</p>
                        <p class="fragment">Tool to securely manage keys and config like <a href="https://docs.ansible.com/ansible/playbooks_vault.html">ansible-vault</a> or <a href="https://vaultproject.io/">Hashicorp Vault</a>?</p>
                    </section>
                    <section>
                        <h3>Why?</h3>
                        <p>Security</p>
                        <p class="fragment">Scalability</p>
                        <p class="fragment">Separation of deploy targets config</p>
                    </section>
                </section>
                <section>
                    <section>
                        <h2>IV. Backing Services</h2>
                        <blockquote>Treat backing services as attached resources</blockquote>
                    </section>
                    <section>
                        <h3>Backing Service</h3>
                        <p>A backing service is any service the app consumes over a network</p>
                        <ul>
                            <li class="fragment">Database</li>
                            <li class="fragment">Caching service</li>
                            <li class="fragment">Queuing services</li>
                            <li class="fragment">SMTP services</li>
                        </ul>
                    </section>
                    <section>
                        <h3>Local vs. Remote</h3>
                        <p>A twelve-factor app makes no distinction of local, remote, or third-party services</p>
                        <p class="fragment">It treats all the same and accesses them using a URI specified in config</p>
                        <p class="fragment">Should be able to swap out services without any code changes</p>
                    </section>
                    <section>
                        <h3>Why?</h3>
                        <p>Makes managing multiple deploy targets or environment easier</p>
                        <p class="fragment">Hot-swapping of services without code change</p>
                        <p class="fragment">e.g. A database gets corrupted, spin up new one based on backup, swap with config change</p>
                    </section>
                </section>
                <section>
                    <section>
                        <h2>V. Build, release, run</h2>
                        <blockquote>Strictly separate build and run stages</blockquote>
                    </section>
                    <section>
                        <h3>Deploy</h3>
                        <p>A non-production deploy is created in three separate stages</p>
                    </section>
                    <section>
                        <h3>Build</h3>
                        <p>Transforms a code base into an executable</p>
                        <p class="fragment">Compilation of binaries and assets</p>
                        <p class="fragment">Vendoring of dependencies</p>
                        <p class="fragment">Bundles together into a <em>build</em></p>
                    </section>
                    <section>
                        <h3>Release</h3>
                        <p>Combines build with config for the deploy target into a <em>release</em></p>
                        <p class="fragment">Resulting release is ready for execution on target</p>
                    </section>
                    <section>
                        <h3>Run</h3>
                        <p>Runs the app in the execution environment on the target</p>
                        <p class="fragment">Launches the <em>release</em> as a set of <em>processes</em></p>
                    </section>
                    <section>
                        <h3>Strict Separation</h3>
                        <blockquote>The twelve-factor app uses strict separation between the build, release, and run stages</blockquote>
                        <p class="fragment">Can't change code at runtime or release time</p>
                    </section>
                    <section>
                        <h3>Release Management</h3>
                        <p>Sort of an aside to Twelve-Factor App</p>
                        <p class="fragment">Some build tools manage releases</p>
                        <p class="fragment">Releases are tagged with incrementing version number or timestamp</p>
                        <p class="fragment">Current release is symlinked, rollback is easy, just change symlink</p>
                    </section>
                    <section>
                        <h3>Build vs. Runtime</h3>
                        <p>Builds are done by DevOps performing the deploy</p>
                        <p class="fragment">Runtime execution can happen automatically after a reboot or when a process manager restarts after a crash</p>
                        <p class="fragment">Runtime should therefore be as simple as possible, while builds can be more complex</p>
                    </section>
                    <section>
                        <h3>Why?</h3>
                        <p>Improved uptime by:</p>
                        <ul>
                            <li class="fragment">Separation of steps == consistency</li>
                            <li class="fragment">Easy rollback to previous version</li>
                            <li class="fragment">Simple runtime steps ensure easy restarts in the middle of the night</li>
                        </ul>
                    </section>
                </section>
            </div>
        </div>
        <script>
            // Full list of configuration options available at:
            // https://github.com/hakimel/reveal.js#configuration
            Reveal.initialize({
                controls: true,
                progress: true,
                history: true,
                center: true,
                transition: 'slide', // none/fade/slide/convex/concave/zoom
                // Optional reveal.js plugins
                dependencies: [
                    { src: '../../lib/js/classList.js', condition: function() { return !document.body.classList; } },
                    { src: '../../plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                    { src: '../../plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                    { src: '../../plugin/highlight/highlight.js', async: true, condition: function() { return !!document.querySelector( 'pre code' ); }, callback: function() { hljs.initHighlightingOnLoad(); } },
                    { src: '../../plugin/zoom-js/zoom.js', async: true },
                    { src: '../../plugin/notes/notes.js', async: true }
                ]
            });
        </script>
    </body>
</html>
